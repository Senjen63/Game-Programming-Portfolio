#include "CollisionObj.h"

CollisionObj::CollisionObj(std::pair<float, float>location, Animation* currentAnimation) : Unit(location, currentAnimation)
{
	EventSystem* pEventSystem = EventSystem::getInstance();
	pEventSystem->addListener((EventType)MOVE_EVENT, this);
}

void CollisionObj::handleEvent(const Event& theEvent)
{
	if (theEvent.getType() == MOVE_EVENT)
	{
		const MoveEvent& moveEvent = static_cast<const MoveEvent&>(theEvent);

		if (moveEvent.getPosition() == getLocation())
		{
			if (moveEvent.getObjectTag() == "SnakeManager")
			{
				EventSystem* pEventSystem = EventSystem::getInstance();
				pEventSystem->fireEvent(SnakeCollisionEvent());
			}
		}
	}
}
