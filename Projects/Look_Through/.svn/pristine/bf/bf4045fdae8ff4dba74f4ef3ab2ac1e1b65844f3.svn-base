#pragma once

#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_audio.h>
#include <allegro5/allegro_acodec.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_primitives.h>

#include <PerformanceTracker.h>
#include <MemoryTracker.h>
#include <Vector2D.h>
#include <string>
#include <iostream>

#include "GraphicsBuffer.h"
#include "Font.h"
#include "Sprite.h"
#include "Color.h"

using namespace std;

class GraphicsSystem : public Trackable
{
public:
	//Constructors
	GraphicsSystem();
	GraphicsSystem(int height, int width);
	
	//Destructor
	~GraphicsSystem();
	
	//Functions
	void cleanup();
	void draw(Vector2D targetLocation, Sprite* sprite, float scale);
	void draw(GraphicsBuffer* targetBuffer, Vector2D targetLocation, Sprite* sprite, float scale);
	void flip();
	bool init();
	void saveBuffer(GraphicsBuffer* buffer, string fileName);
	void writeText(Vector2D targetLocation, Font* font, Color color, string text);
	void writeText(GraphicsBuffer* targetBuffer, Vector2D targetLocation, Font* font, Color color, string text);

	//Accessors
	int getHeight();
	int getWidth();
	GraphicsBuffer* getBackBuffer();

private:
	//Variables
	ALLEGRO_DISPLAY* mpDisplay;
	GraphicsBuffer* mpBuffer;
	int mHeight;
	int mWidth;
};
