/*******************************************************
* Author: Aven Presseisen
* Class: GPR-250-02
* Assignment: Assignment 1
* Certification of Authenticity:
* I certify that this assignment is entirely my own work.
************/

#pragma once

#include <allegro5/display.h>
#include <allegro5/allegro_image.h>

#include "Sprite.h"
#include "Font.h"

class GraphicsSystem : public Trackable
{
	ALLEGRO_DISPLAY * mpDisplay;

	void init();

public:
	GraphicsSystem( int width, int height );
	~GraphicsSystem();

	void cleanup();
	void clear( const ALLEGRO_COLOR & color );
	void clear( const GraphicsBuffer & targetBuffer, const ALLEGRO_COLOR & color );
	void draw( int locX, int locY, const Sprite & sprite, float scale = 1.0f );
	void draw( const GraphicsBuffer & targetBuffer, int locX, int locY, const Sprite & sprite, float scale = 1.0f );
	void flip();
	void saveBuffer( const GraphicsBuffer & graphicsBuffer, const char * pFilename );
	void saveBuffer( ALLEGRO_BITMAP * bitmap, const char * pFilename );
	void writeText( int locX, int locY, const Font & font, const ALLEGRO_COLOR & color, const char * pText );
	void writeText( const GraphicsBuffer & targetBuffer, int locX, int locY, const Font & font, const ALLEGRO_COLOR & color, const char * pText );

	// Accessors
	ALLEGRO_BITMAP * getBackBuffer() const;
	int getHeight() const;
	int getWidth() const;
};
