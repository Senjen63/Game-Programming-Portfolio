#pragma once
#include "Unit.h"
#include "SpawnItemEvent.h"

#include <Trackable.h>
#include <EventSystem.h>

class ItemSpawner : public Trackable
{
    private:
        EventSystem* mpEventSystem = nullptr;

        float mBaseTime = 0; //fixed time guaranteed before item spawns
        int mRandomTime = 1; //random time added to fixed time to add random element
        
        float mSpeedChance = 0;
        float mSlowChance = 0;
        float mBonusChance = 0;

        float mTimer = 0;

    public:
        ItemSpawner();
        ~ItemSpawner();

        void init();
        void cleanup();

        void newLevel(float baseTime, float randomTime, float speedChance, float slowChance, float bonusChance);
        void updateSpawner(float elapsedTime);
        void spawnItem();
};