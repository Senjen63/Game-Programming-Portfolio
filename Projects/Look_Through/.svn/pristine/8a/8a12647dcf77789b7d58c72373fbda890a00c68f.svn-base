#include "Game.h"
#include "Unit.h"
#include "Sprite.h"
#include "Animation.h"
#include "GraphicsSystem.h"


void Unit::update(double dt)
{
	mpCurrentAnim->update(dt);
}

void Unit::draw()
{
	GraphicsSystem* graphSys = Game::getInstance()->getGraphicsSystem();

	graphSys->draw(mDrawLocation, mpCurrentAnim->getCurrentSprite());
}

void Unit::toggleAnimation()
{
	if (mpCurrentAnim == &mMainAnim)
	{
		mpCurrentAnim = &mAltAnim;
	}
	else
	{
		mpCurrentAnim = &mMainAnim;
	}

	updateDrawLocation();
}

void Unit::setLocation(Vector2D location)
{
	mLocation = location;
	updateDrawLocation();
}

void Unit::updateDrawLocation()
{
	// Location to draw the sprites so they're centered on mLocation
	mAnimWidth = mpCurrentAnim->getCurrentSprite()->getWidth();
	mAnimHeight = mpCurrentAnim->getCurrentSprite()->getHeight();

	mDrawLocation = mLocation - Vector2D(mAnimWidth / 2, mAnimHeight / 2);
}