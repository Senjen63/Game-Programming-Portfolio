#include "Unit.h"

Unit::Unit(Vector2D pos, int fps)
{
    mFps = fps;
    mPos = pos;
}


Unit::~Unit()
{

}


int Unit::getAnimCount()
{
    return mAnims.size();
}


int Unit::getCurrentIndex() 
{
    return mCurrentIndex;
}


void Unit::update(float timeElapsed)
{
    if (mAnims.size() > 0)
    {
        mAnims[mCurrentIndex].update(timeElapsed);
    }
}


void Unit::draw(GraphicsSystem* graphics)
{
    Vector2D offset = Vector2D(mAnims[mCurrentIndex].getCurrentSprite().getWidthHeight()) / 2;
    Vector2D pos = mPos - offset;
    graphics->draw(pos.getX(), pos.getY(), mAnims[mCurrentIndex].getCurrentSprite(), 1, 1);
}


void Unit::changePosition(Vector2D newPos)
{
    mPos = newPos;
}


void Unit::addAnimation(GraphicsBuffer* graphicsBuffer, int xSections, int ySections)
{
    Animation newAnim = Animation(graphicsBuffer, xSections, ySections, mFps, true);
    mAnims.push_back(newAnim);
}


void Unit::setAnimation(int index)
{
    mCurrentIndex = index;
    setFps(mFps);
}


void Unit::setFps(int fps)
{
    mFps = fps;
    mAnims[mCurrentIndex].changeSpeed(fps);
}