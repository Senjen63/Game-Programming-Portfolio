#pragma once
#include <Trackable.h>
#include <vector>

#include "GraphicsSystem.h"

class Animation : public Trackable
{
    private:
        vector<Sprite> mFrames;
        unsigned int mCurrent = 0;
        int mFps;
        float mTimePerSprite = 1000.0 / mFps;
        float mTimeLeft;
        bool mLoop = true;

    public:
        Animation(int fps, bool loop);
        Animation(GraphicsBuffer* frames, int xSections, int ySections, int fps, bool loop);
        ~Animation();

        int getCurrentFrame() const;
        int getFrameTotal() const;
        Sprite getCurrentSprite();

        void addSprite(Sprite newSprite);
        void update(float timeElapsed);
        void changeSpeed(int newFps);
        void sync(const Animation& lastAnim);
};