#include "Animation.h"

void Animation::addSprite(GraphicsBuffer* frames, int columns, int rows, int fps, bool shouldLoop)
{
	if (columns == 1 && rows == 1)
	{
		Sprite thisFrame = Sprite(frames, Vector2D(0, 0), Vector2D(frames->getWidth(), frames->getHeight()));
		mSpriteList.push_back(thisFrame);
		mTimePerFrame = 1000.0 / fps;
		mShouldLoop = shouldLoop;
		return;
	}

	for (int i = 0; i < columns; i++)
	{
		for (int j = 0; j < rows; j++)
		{
			Sprite thisFrame = Sprite(frames, Vector2D((frames->getWidth() / columns) * j, (frames->getHeight() / rows) * i),
				Vector2D(frames->getWidth() / columns, frames->getHeight() / rows));
			mSpriteList.push_back(thisFrame);
		}
	}

	mTimePerFrame = 1000.0 / fps;
	mShouldLoop = shouldLoop;
}

void Animation::speedChange(double amount)
{
	mTimePerFrame += amount;

	if (mTimePerFrame < 0.1)
	{
		mTimePerFrame = 0.1;
	}
	//cout << mTimePerFrame << endl;
}