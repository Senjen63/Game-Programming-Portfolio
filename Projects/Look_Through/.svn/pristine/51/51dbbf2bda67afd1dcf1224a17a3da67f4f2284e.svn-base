#include <vector>
#include "Sprite.h"

Sprite* Sprite::slice(const GraphicsBuffer* pBuffer, int spriteWidth, int spriteHeight, int numSprites)
{
    Sprite* sprites = new Sprite[numSprites];
    int index = 0;

    for (int y = 0; y < pBuffer->getHeight(); y += spriteHeight)
    {
        for (int x = 0; x < pBuffer->getWidth(); x += spriteWidth)
        {
            sprites[index] = Sprite(pBuffer, Vector2D(x, y), spriteWidth, spriteHeight);
            index++;

            if (index >= numSprites)
                return sprites;
        }
    }

    return sprites;
}

Sprite::Sprite(const GraphicsBuffer* pBuffer, const Vector2D& loc, int width, int height)
{
    this->mpBuffer = pBuffer;
    this->mLoc = loc;
    this->mWidth = width;
    this->mHeight = height;
}

Sprite::Sprite(const GraphicsBuffer* pBuffer) : 
    Sprite(pBuffer, Vector2D(), pBuffer->getWidth(), pBuffer->getHeight()) {}

Sprite::Sprite()
{
    mpBuffer = nullptr;
    mLoc = Vector2D();
    mWidth = 0;
    mHeight = 0;
}

Sprite::~Sprite() {}
