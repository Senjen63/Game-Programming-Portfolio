#pragma once
#include <allegro5/allegro.h>
#include <Vector2D.h>
#include "Sprite.h"
#include "GraphicsBuffer.h"
#include "Color.h"
#include "Font.h"

class GraphicsSystem
{

	friend class Game;

private:
	ALLEGRO_DISPLAY* mpDisplay;

	int mWidth;
	int mHeight;

	ALLEGRO_BITMAP* getBackBuffer();

public:
	GraphicsSystem(int width, int height);

	~GraphicsSystem();

	int init();

	void cleanup();

	void flip();

	void draw(Vector2D destination, Vector2D source, Sprite sprite, float scale);

	void draw(GraphicsBuffer* buffer, Vector2D destination, Vector2D location, Sprite sprite, float scale);

	void writeText(Vector2D location, Font font, Color color, string text);

	void writeText(GraphicsBuffer* buffer, Vector2D location, Font font, Color color, string text);

	void saveBuffer(GraphicsBuffer* buffer, string filename);
};