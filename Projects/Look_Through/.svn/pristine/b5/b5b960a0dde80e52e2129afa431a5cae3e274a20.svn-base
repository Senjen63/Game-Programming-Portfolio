#include "Unit.h"
#include "Game.h"

Unit::Unit()
{
	mX = 0;
	mY = 0;
	mType = UnitTypes::DEFAULT_UNIT_TYPE;
	mCurAnim = 0;
}

Unit::Unit( int x, int y, UnitTypes type )
{
	mX = x;
	mY = y;
	mType = type;
	mCurAnim = 0;
}

Unit::~Unit()
{

}

void Unit::addAnim( GraphicsBuffer* gbuff, float targetTime )
{
	Animation aAnim = Animation( gbuff, targetTime );
	mAnims.push_back( aAnim );
}

void Unit::addAnim( int r, int c, GraphicsBuffer* gbuff, float targetTime, bool isSnake )
{
	Animation aAnim = Animation( r, c, gbuff, targetTime, isSnake );
	mAnims.push_back( aAnim );
}

void Unit::update( float deltaTime )
{
	getCurAnim().update( deltaTime );
}

void Unit::draw( float scale )
{
	Game::getGame()->getGraphicsSys()->draw( &getCurAnim().getCurrentSprite(), getX() - getCurAnim().getCurrentSprite().getWidth() / 2,
	 getY() - getCurAnim().getCurrentSprite().getHeight() / 2, scale );
}

void Unit::setAnimation()
{
	if ( mCurAnim >= mAnims.size() - 1 )
		mCurAnim = 0;
	else
		mCurAnim++;
}
