#include "GraphicsBuffer.h"

GraphicsBuffer::GraphicsBuffer( string filePath )
{
    mOwnsBuffer = false;
    mpBuffer = al_load_bitmap(filePath.c_str());
}


GraphicsBuffer::GraphicsBuffer( ALLEGRO_BITMAP* pTarget )
{
    mOwnsBuffer = false;
    mpBuffer = pTarget;
}


GraphicsBuffer::GraphicsBuffer(GraphicsBuffer* pTarget)
{
    mOwnsBuffer = false;
    mpBuffer = pTarget->mpBuffer;
}


GraphicsBuffer::GraphicsBuffer( Color color, int width, int height )
{
    mOwnsBuffer = false;
    mpBuffer = al_create_bitmap( width, height );

    //clears new buffer to color
    ALLEGRO_BITMAP* oldBitmap = al_get_target_bitmap();

    al_set_target_bitmap( mpBuffer );

    al_clear_to_color( al_map_rgba( color.getRed(), color.getGreen(), color.getBlue(), color.getAlpha() ) );

    al_set_target_bitmap( oldBitmap );
}


GraphicsBuffer::~GraphicsBuffer()
{
    if ( mOwnsBuffer )
    {
        al_destroy_bitmap( mpBuffer );
    }
}

int GraphicsBuffer::getWidth()
{
    return al_get_bitmap_width( mpBuffer );
}


int GraphicsBuffer::getHeight()
{
    return al_get_bitmap_height( mpBuffer );
}