#pragma once

#include <PerformanceTracker.h>
#include <vector>

#include "GraphicsSystem.h"
#include "InputSystem.h"
#include "Animation.h"
#include "Unit.h"
#include "Keycode.h"
#include "Mousecode.h"
#include "Conversion.h"


class Game : public Trackable
{
	const std::string PERFORMANCE_TRACKER_STRING = "loop";

	Vector2D mWindowSize;

	float mTargetTimeInMilliseconds;
	float mTargetFramesPerSecond;

	GraphicsSystem* mpGraphicsSystem;
	InputSystem* mpInputSystem;

public:
	Game(int targetFramerate = 60) { setTargetFramesPerSecond(targetFramerate); }
	~Game();

	// Probably move these to cpp
	float getTargetFramesPerSecond() { return mTargetFramesPerSecond;  }
	void setTargetFramesPerSecond(float fps) { mTargetTimeInMilliseconds = 1000.0f / fps; mTargetFramesPerSecond = fps; }

	// Probably move these to cpp
	float getTargetTimeInMilliseconds() { return mTargetTimeInMilliseconds; }
	float setTargetTimeInMilliseconds(float ms) { mTargetFramesPerSecond = ms * 1000.0; mTargetTimeInMilliseconds = ms; }

	void init(Vector2D windowSize = Vector2D(800, 600));
	void cleanup();

	void doLoop();
};

extern Game* gpGame;