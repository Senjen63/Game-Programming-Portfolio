#pragma once
#include <iostream>
#include <cassert>
#include <string>

#include <Vector2D.h>
#include <Timer.h>
#include "GraphicsSystem.h"
#include "GraphicsBuffer.h"
#include "InputSystem.h"
#include "Color.h"
#include "Sprite.h"
#include "Font.h"
#include "Animation.h"
#include "Unit.h"

const string ASSET_PATH = "..\\..\\common\\assets\\";
const string SMURF_FILENAME = "smurf_sprites.png";
const string DEAN_FILENAME = "dean_sprites.png";

const string BACKGROUND_FILENAME = "Woods.png";
const int SPRITE_WIDTH = 60;
const int SPRITE_HEIGHT = 60;
const float STARTING_TIMING = 0.005;
const float SLEEP_MS = 16.7f;
const int FRAMES = 16;
const float TIME_INCREMENT = 0.01f;

class Game : public Trackable
{
private:
	GraphicsSystem* mpGraphSystem = nullptr;
	InputSystem mInputSystem;
	GraphicsBuffer* mpWoods;
	GraphicsBuffer* mpSmurf;
	GraphicsBuffer* mpDean;

	Animation* mpSmurfAnim = nullptr;
	Animation* mpDeanAnim = nullptr;
	Unit* mpObject = nullptr;
	bool leave = false;


public:
	void Init(int height, int width);
	void CleanUp();
	Game();
	~Game();
	void DoLoop();
	void DoInput(Vector2D& mousePos);
	void DoDrawScene(Vector2D& mousePos);
};

extern Game* gpGame;