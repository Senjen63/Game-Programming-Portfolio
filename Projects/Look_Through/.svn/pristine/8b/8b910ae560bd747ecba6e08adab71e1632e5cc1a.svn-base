#include "graphicsBuffer.h"

GraphicsBuffer::GraphicsBuffer()
{
	mpBitmap = NULL;
}
GraphicsBuffer::GraphicsBuffer(string& fileName)
{
	mpBitmap = al_load_bitmap((fileName).c_str());
	mOwns = true;
}
GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* pBitmap) //This one is for graphicssystem use
{
	mpBitmap = pBitmap;
	mOwns = false;
}
GraphicsBuffer::GraphicsBuffer(Color color, int width, int height)
{
	ALLEGRO_BITMAP* currentBitmap = al_get_target_bitmap();

	mpBitmap = al_create_bitmap(height, width);
	al_set_target_bitmap(mpBitmap);
	al_clear_to_color(color.GetColor());
	assert(mpBitmap);

	al_set_target_bitmap(currentBitmap);
}
GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwns)
	{
		al_destroy_bitmap(mpBitmap);
	}
}
float GraphicsBuffer::GetHeight()
{
	return al_get_bitmap_height(mpBitmap);
}
void GraphicsBuffer::SetHeight(float newHeight)
{
	mHeight = newHeight;
}
float GraphicsBuffer::GetWidth()
{
	return al_get_bitmap_width(mpBitmap);
}
void GraphicsBuffer::SetWidth(float newWidth)
{
	mWidth = newWidth;
}
ALLEGRO_BITMAP* GraphicsBuffer::GetBitmap()
{
	return mpBitmap;
}
void GraphicsBuffer::SetBitmap(ALLEGRO_BITMAP* newBitmap)
{
	mpBitmap = newBitmap;
}