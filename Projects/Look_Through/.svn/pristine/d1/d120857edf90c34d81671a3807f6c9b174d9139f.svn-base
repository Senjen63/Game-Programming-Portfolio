#include "Animation.h"

Animation::Animation(bool isLooping)
{
	mIsLooping = isLooping;
}

Animation::~Animation()
{
	mSprites.clear();
}

void Animation::cleanup()
{
	for( int i = mSprites.size() - 1; i >= 0; i-- )
	{
		delete mSprites[ i ];
	}
}

void Animation::addSprite( Sprite * sprite )
{
	mSprites.push_back( sprite );
}

void Animation::updateSprite()
{
	mCurrentFramesTotal++;
	mCurrentIndex = mCurrentFramesTotal / mFramesPerSpriteChange;
	if( mCurrentIndex >= (int)mSprites.size() )
	{
		if( mIsLooping )
		{
			mCurrentIndex = 0;
			mCurrentFramesTotal = 0;
			return;
		}
		mCurrentIndex--;
	}
	
}

Sprite * Animation::getCurrentSprite() const
{
	return mSprites[mCurrentIndex];
}

void Animation::speedUp()
{
	if( mFramesPerSpriteChange <= 1 ) return;
	mFramesPerSpriteChange--;
}

void Animation::slowDown()
{
	mFramesPerSpriteChange++;
}
