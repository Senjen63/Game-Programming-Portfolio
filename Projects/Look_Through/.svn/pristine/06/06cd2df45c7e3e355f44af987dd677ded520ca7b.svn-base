#include "GraphicsBuffer.h"

//Constructors
GraphicsBuffer::GraphicsBuffer(int height, int width)
{
	mpBitmap = al_create_bitmap(width, height);
	mHasBitmap = true;
}

GraphicsBuffer::GraphicsBuffer(int height, int width, Color color)
{
	ALLEGRO_BITMAP* pHolder = al_get_target_bitmap();
	mpBitmap = al_create_bitmap(width, height);
	al_set_target_bitmap(mpBitmap);
	al_clear_to_color(color.getColor());
	al_set_target_bitmap(pHolder);
	mHasBitmap = false;
}

//Pulls a bitmap from a file
GraphicsBuffer::GraphicsBuffer(string fileName)
{
	mpBitmap = al_load_bitmap(fileName.c_str());
	mHasBitmap = true;
}

//Copy constructor
GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* pBitmap)
{
	mpBitmap = pBitmap;
	mHasBitmap = false;
}

//Destructor
GraphicsBuffer::~GraphicsBuffer()
{
	if (mHasBitmap)
	{
		al_destroy_bitmap(mpBitmap);
	}
}
//Accessors
ALLEGRO_BITMAP* GraphicsBuffer::getBitmap()
{
	return mpBitmap;
}

int GraphicsBuffer::getHeight()
{
	return al_get_bitmap_height(mpBitmap);
}

int GraphicsBuffer::getWidth()
{
	return al_get_bitmap_width(mpBitmap);
}
