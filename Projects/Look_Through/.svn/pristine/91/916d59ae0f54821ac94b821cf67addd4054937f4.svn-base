#include "Unit.h"
#include "Sprite.h"
#include "Animation.h"

Unit::Unit(Animation* animation)
{
	mpAnimation = animation;
	
	updateDrawLocation();
}

Unit::Unit(Vector2D location)
{
	mLocation = location;
}

Unit::Unit(Vector2D location, Animation* animation)
{
	mpAnimation = animation;
	mLocation = location;

	updateDrawLocation();
}

Unit::~Unit()
{
	mpAnimation = nullptr;
}

void Unit::update(double dt)
{
	mpAnimation->update(dt);
}

Vector2D Unit::getDrawLocation()
{
	return mDrawLocation;
}

Sprite Unit::draw()
{
	return mpAnimation->getCurrentSprite();
}

void Unit::setAnimation(Animation* animation)
{
	mpAnimation = animation;
	updateDrawLocation();
}

void Unit::setLocation(Vector2D location)
{
	mLocation = location;
	updateDrawLocation();
}

void Unit::updateDrawLocation()
{
	// Location to draw the sprites so they're centered on mLocation
	mAnimWidth = mpAnimation->getCurrentSprite().getWidth();
	mAnimHeight = mpAnimation->getCurrentSprite().getHeight();

	mDrawLocation = mLocation - Vector2D(mAnimWidth / 2, mAnimHeight / 2);
}