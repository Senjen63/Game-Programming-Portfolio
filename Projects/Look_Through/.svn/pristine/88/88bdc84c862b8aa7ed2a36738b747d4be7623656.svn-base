#pragma once
#include <Trackable.h>
#include <vector>

#include "AnimationFrames.h"

const float DEFAULT_TIME_SCALE = 1000.0f;

class Animation : public Trackable
{
    private:
        AnimationFrames* mpFrames = nullptr;
        unsigned int mCurrent = 0;
        int mFps;
        float mTimePerSprite = DEFAULT_TIME_SCALE / mFps;
        float mTimeLeft;
        bool mLoop = true;

    public:
        Animation(int fps, bool loop);
        Animation(AnimationFrames* frames, int fps, bool loop);
        ~Animation();

        int getCurrentFrame() const;
        int getFrameTotal() const;
        Sprite getCurrentSprite();

        void addSprite(Sprite newSprite);
        void update(float timeElapsed);
        void changeSpeed(int newFps);
        void sync(const Animation& lastAnim);
};