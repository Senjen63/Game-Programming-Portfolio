#include "Puffle.h"
#include "Game.h"

Puffle::Puffle(Direction dir, Vector2D location, Animation* anim, AnimationBase* bulletAnim) : EnemyBase{ dir, location, anim }
{
	mSpeed = PUFFLE_SPEED;

	mMaxHealth = PUFFLE_HEALTH;
	if (Game::getInstance()->getDifficulty() == NORMAL) { mMaxHealth = int(mMaxHealth * HEALTH_MULT_NORMAL); }
	if (Game::getInstance()->getDifficulty() == HARD) { mMaxHealth = int(mMaxHealth * HEALTH_MULT_HARD); }
	mCurrentHealth = mMaxHealth;

	mInvFrames = PUFFLE_INV;
	mBulletTime = 0;
	mpBulletAnimation = bulletAnim;
}

Puffle::~Puffle()
{
}

void Puffle::move()
{
	//bullet spawning action

	mBulletTime++;
	if (mBulletTime > PUFFLE_SHOT_TIMER)
	{
		mBulletTime = 0;
		Game::getInstance()->getLevels()->addBullet(new Bullet(mDirection, mLocation, new Animation(0,mpBulletAnimation), BULLET_SPEED));
	}
}