#pragma once

#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_audio.h>
#include <allegro5/allegro_acodec.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_primitives.h>

#include <Trackable.h>
#include <Vector2D.h>

#include <iostream>
#include <cassert>
#include <string>
#include <vector>
#include <fstream>

#include <PerformanceTracker.h>
#include <Timer.h>

#include "Unit.h"
#include "GraphicsSystem.h"

class UnitManager : public Trackable
{
public:
	UnitManager();
	~UnitManager();

	void addUnit(Animation* anim1, Animation* anim2, Vector2D location, string code, Vector2D velocity);
	void deleteUnit(Unit* pUnitDestroy);
	Unit* getUnit();

	void cleanUp();
	void saveUnitData();
	void loadUnitData(Animation* anim1, Animation* anim2);

	void updateAll(double dt);
	void drawAll(GraphicsSystem* display);

	void setShouldUpdate();
	void deleteArea(Vector2D mousePos);

	void moveUnits();
	Vector2D getFirstLoc();
	Vector2D getLastLoc();
	Vector2D getSecondLastLoc();

	void doesCollide(Vector2D pos);
	Unit* doesLeaveScreen();
	bool doesClick(Vector2D pos);

private:
	vector<Unit*> mpUnits;
};