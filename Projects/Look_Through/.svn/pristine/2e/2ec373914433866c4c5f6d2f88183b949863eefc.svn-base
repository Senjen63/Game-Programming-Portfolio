#pragma once

#include "Unit.h"
#include "InputSystem.h"
#include "UnitManager.h"
#include "GraphicsSystem.h"
#include "GraphicsBufferManager.h"
#include "Animation.h"
#include <Trackable.h>
#include <algorithm>
#include <PerformanceTracker.h>

const string ASSET_PATH = "GameAssets\\";
const string BACKGROUND_FILENAME = "Swamp.jpg";
const string SMURFS_FILENAME = "ShrekSnakeHeadIdle.png";
const string DEAN_SMURFS_FILENAME = "ShrekSnakeHeadEat1.png";
const string LOOP_NAME = "gameLoop";
const Color RED = Color(255, 0, 0);
const Color BLUE = Color(0, 0, 255);
const int WIDTH = 1920;
const int HEIGHT = 1080;
const int MIN_FPS = 10;
const int MAX_FPS = 160;
const int SPEED = 20;
const int SMURF_SPACING = 1;
const float TIME_SCALE = 1000.0;

const enum Buttons
{
	LMB = 1,
	RMB = 2,
	F = 6,
	S = 19,
	ESC = 59,
	ENTER = 67,
	SPACE = 75
};

class Game : public Trackable
{
public:
	void loop();
	void cleaner();
	void init();
	static void createGame(Vector2D lengthXY);
	static void destroyGame();
	static Game* getGame();
	InputSystem* getInputSystem();
	GraphicsSystem* getGraphicsSystem();
	int enterCount = 2; // To try to make the Dean Sprite transition more noticable
private:
	Game();
	Game(Vector2D lengthXY);
	~Game();
	int mFps = 60;
	bool mIsClean = false;
	bool mIsInit = false;
	bool mLoopTheGame = true;
	float mFrameTime = 1000.0 / mFps;
	static Game* spSmurfGame;
	Vector2D mlengthXY;
	InputSystem* mpInputSystem;
	GraphicsSystem* mpGraphicsSystem;
	UnitManager* mpUnitManager;
	GraphicsBufferManager* mpGraphicsBufferManager;
};