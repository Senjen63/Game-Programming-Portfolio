#pragma once
#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_audio.h>
#include <allegro5/allegro_acodec.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_primitives.h>

#include <iostream>
#include <cassert>
#include <string>
#include <vector>
#include <Vector2D.h>

#include <EventListener.h>
#include <EventSystem.h>

#include "Assets.h"
#include "GraphicsBufferManager.h"
#include "Graphics.h"
#include "Buffer.h"
#include "Sprite.h"
#include "HudEvent.h"
#include "FpsEvent.h"
#include "TimeEvent.h"
#include "ScoreEvent.h"

class Gui : public EventListener
{
public:
	Gui();
	Gui(GraphicsSystem* gSystem);
	~Gui();

	void init();
	void cleanup();
	void display();
	void increaseScore();
	void handleEvent(const Event& currentEvent);
	int getBufferWidth() {	return HUD_BUFFER_WIDTH; }
	int getBufferHeight() { return HUD_BUFFER_HEIGHT; }
	
	void setScore(int newScore) { mScore = newScore; }
	void setFps(float newFps) { mFps = newFps; }
	void setTime(float newTime) { mTime = newTime; }

private:
	const int HUD_BUFFER_WIDTH = 200;
	const int HUD_BUFFER_HEIGHT = 25;
	int score;
	Color mBlack = Color(0, 0, 0, 0);
	Color mWhite = Color(255, 255, 255, 0);
	Font* mpCour;
	float mFps = 0.0f;
	int mScore = 0;
	float mTime = 0.0f;
	const std::string mFONT_FILENAME = "..\\..\\common\\assets\\cour.ttf";
	const std::string mTEMP_FILE_PATH = "..\\..\\common\\assets\\";
	EventSystem* mpEventSystem;
	GraphicsBufferManager* mpGuiManager;
	GraphicsSystem* mpGraphicsSystem;
};