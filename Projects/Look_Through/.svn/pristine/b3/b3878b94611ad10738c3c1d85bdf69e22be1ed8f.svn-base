#include "GraphicsBuffer.h"


GraphicsBuffer::GraphicsBuffer(std::string fullPath)
{
	mOwnsBitmap = true;
	mpBitmap = al_load_bitmap(fullPath.c_str());;
}


GraphicsBuffer::GraphicsBuffer(Vector2D size)
{
	mOwnsBitmap = true;
	mpBitmap = al_create_bitmap(size.getX(), size.getY());
}


GraphicsBuffer::GraphicsBuffer(Vector2D size, Color color) : GraphicsBuffer::GraphicsBuffer(size)
{
	ALLEGRO_BITMAP* oldBitmap = al_get_target_bitmap();

	al_set_target_bitmap(mpBitmap);

	al_clear_to_color(al_map_rgba(color.r, color.g, color.b, color.a));

	al_set_target_bitmap(oldBitmap);
}


GraphicsBuffer::GraphicsBuffer(GraphicsBuffer* og)
{
	mOwnsBitmap = false;
	mpBitmap = og->getBitmap();
}


GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* pBitmap)
{
	mOwnsBitmap = false;
	mpBitmap = pBitmap;
}


GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwnsBitmap && mpBitmap)
	{
		al_destroy_bitmap(mpBitmap);
	}
}
