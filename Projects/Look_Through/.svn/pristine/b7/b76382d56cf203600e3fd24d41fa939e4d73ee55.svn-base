#pragma once

#include <string>
#include <vector>

#include <Trackable.h>
#include <Vector2D.h>

class GraphicsBufferManager;
class GraphicsSystem;
class GraphicsBuffer;
class InputSystem;
class UnitManager;
class Animation;
class Sprite;
class Color;
class Font;
class Unit;

using namespace std;

class Game : public Trackable
{
public:

	static Game* getInstance();
	static void createInstance();
	static void destroyInstance();	

	GraphicsSystem* getGraphicsSystem();

	void init(int width, int height);
	void cleanup();
	void doLoop();

private:

	Game() {};
	~Game();	
	
	static Game* mpsGame;

	GraphicsSystem* mpGraphicsSystem = nullptr;
	InputSystem* mpInputSystem = nullptr;	

	Animation* mpSmurfAnim = nullptr;
	Animation* mpDeanAnim = nullptr;

	GraphicsBufferManager* mpGraphicsBufferManager = nullptr;
	UnitManager* mpUnitManager = nullptr;

	int mDispWidth = 800;			// Units in pixels
	int mDispHeight = 600;

	const int TARGET_FRAME_RATE = 60;
	const double FRAME_INTERVAL_IN_MS = (1.0 / (double)TARGET_FRAME_RATE) * 1000;	
	const double ANIM_SWAP_DELAY_IN_MS = 100;
	const double ANIM_PAUSE_DELAY_IN_MS = 100;

	const int NUM_SPRITES_PER_SHEET = 16;

	const int SPRITE_WIDTH = 60;		// Units in pixels
	const int SPRITE_HEIGHT = 60;
	const int SPRITE_SHEET_WIDTH = 4;	// Units in sprites
	const int SPRITE_SHEET_HEIGHT = 4;

	const string ASSET_PATH = "..\\..\\common\\assets\\";
	const string BACKGROUND_FILENAME = "woods.png";
	const string DEAN_FILENAME = "dean_sprites.png";
	const string SMURF_FILENAME = "smurf_sprites.png";
	//const string FONT_FILENAME = "cour.ttf";
	//const int FONT_SIZE = 48;
	//const string SAMPLE_FILENAME = "clapping.wav";
	//const double SLEEP_TIME = 5.0;

	const Vector2D ORIGIN = Vector2D(0, 0);		
};
	

