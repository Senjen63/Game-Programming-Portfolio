#include "Unit.h"

Unit::Unit()
{
	mpSmurfWalk = NULL;
	mpDeanWalk = NULL;
	mpCurrent = NULL;
	mX = 0;
	mY = 0;
	mAnimChoose = 0;
}

Unit::Unit(int x, int y, Animation* smurf)
{
	mpSmurfWalk = smurf;
	mpDeanWalk = NULL;
	mpCurrent = mpSmurfWalk;
	mAnimChoose = 0;
	mX = x;
	mY = y;
}

Unit::Unit(int x, int y, Sprite sprite)
{
	mSprite = sprite;	
	mpSmurfWalk = NULL;
	mpCurrent = NULL;
	mpDeanWalk = NULL;
	mAnimChoose = 0;
	mX = x;
	mY = y;
}

Unit::Unit(int x, int y, Animation* smurf, Animation* dean)
{
	mpSmurfWalk = smurf;
	mpDeanWalk = dean;
	mpCurrent = mpSmurfWalk;
	mAnimChoose = 0;
	mX = x;
	mY = y;
}
Unit::~Unit()
{
	mpSmurfWalk = nullptr;
	mpDeanWalk = nullptr;
	mpCurrent = nullptr;
	mX = 0;
	mY = 0;
	mAnimChoose = 0;
}

void Unit::update(float removeTime)
{
	if (mpCurrent != nullptr)
	{
		mpCurrent->update(removeTime);
	}
}


void Unit::draw(GraphicsSystem* display , Vector2D pos)
{
	mX = pos.getX();
	mY = pos.getY();
	display->draw(mX, mY, mpCurrent->getCurrentSprite());
}

void Unit::drawSprite(GraphicsSystem* display, Vector2D pos)
{
	mX = pos.getX();
	mY = pos.getY();
	display->draw(mX, mY,mSprite);
}


void Unit::storeAnimations(Animation* smurf, Animation* dean)
{
	mpSmurfWalk = smurf;
	mpDeanWalk = dean;
}

void Unit::setAnimation()
{

	if (mpCurrent == mpSmurfWalk) {
		mpCurrent = mpDeanWalk;
		mAnimChoose = 1;
	}
	else
	{
		mpCurrent = mpSmurfWalk;
		mAnimChoose = 0;
	}
}

void Unit::changeSpeed(float timeChange)
{
	mpCurrent->adjustTime(timeChange);
}

Vector2D Unit::getPos()
{
	Vector2D pos = Vector2D(mX, mY);
	return pos;
}

Sprite Unit::getSprite()
{	
	return mSprite;
}

Animation* Unit::getAnim()
{
	return mpCurrent;
}

void Unit::setPos(Vector2D pos)
{
	mX = pos.getX();
	mY = pos.getY();
}

void Unit::pause()
{
	mpCurrent->pause();
}