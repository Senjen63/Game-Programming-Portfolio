#pragma once
#include "Unit.h"
#include "ActionEvent.h"
#include "EndLevelEvent.h"
#include "Level.h"
#include "AddScoreEvent.h"
#include "Sound.h"

class UnitManager;

class PlayerUnit : public Unit
{
    private:
        Sound* mpIdle;
        Sound* mpWalk;
        Sound* mpJump;
        
    public:
        PlayerUnit();
        PlayerUnit(Vector2D pos, int fps, bool physicsActive, bool gravityActive, bool physicsColliderActive, Sound* Idle, Sound* Jump, Sound* Walk);
        PlayerUnit(Vector2D pos, AnimationFrames* anim, int fps, bool loopAnimation, int type, bool physicsActive, bool gravityActive, bool physicsColliderActive, Sound* Idle, Sound* Jump, Sound* Walk);
        ~PlayerUnit();

        void init() override;
        void cleanup();

        void handleEvent(const Event& currentEvent) override;

        void update(float timeElapsed ) override;

        void checkCollisions(UnitManager* pUnitManager, Level* pLevel, Sound* ArrowCollide, Sound* SpikeCollide, Sound* DoorCollide);

        void checkDoorCollision(UnitManager* pUnitManager);
        
        void checkSpikeCollision(UnitManager* pUnitManager);
        void checkCollectibleCollision(UnitManager* pUnitManager, Level* pLevel);
        void playSound(int index);
};