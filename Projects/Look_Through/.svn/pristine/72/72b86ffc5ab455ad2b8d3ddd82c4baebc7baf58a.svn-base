#pragma once

#include <PerformanceTracker.h>
#include <MemoryTracker.h>
#include <Timer.h>

#include "GraphicsSystem.h"
#include "Animation.h"
#include "InputSystem.h"
#include "UnitManager.h"
#include "GraphicsBufferManager.h"

#include "Unit.h"

const string ASSET_PATH = "..\\..\\common\\assets\\";
const string WOODS_FILENAME = "Woods.png";
const string SMURF_FILENAME = "smurf_sprites.png";
const string DEAN_FILENAME = "dean_sprites.png";

const int SPRITE_WIDTH = 60;
const int SPRITE_HEIGHT = 60;

const int NUM_FRAMES = 16;
const float STARTING_TIMING = 0.0005;

const double SLEEP_MS = 16.7;

class Game : public Trackable
{
private:
	static Game* mpsGameSystem;

	GraphicsSystem* mpSystem;
	InputSystem mInputSystem;

	GraphicsBufferManager mBufferManager;
	UnitManager mUnitManager;

public:
	Game();
	~Game();

	static Game* getInstance();
	static void createInstance();
	static void destroyInstance();

	void init();
	void cleanup();

	void doLoop();

	GraphicsBuffer* getGraphicsBuffer(string index);
};
