#pragma once
#include <PerformanceTracker.h>
#include "GraphicsSystem.h"
#include "InputSystem.h"
#include "UnitManager.h"
#include "GraphicsBufferManager.h"

class Game : public Trackable
{
public:
	static void createGame();
	static void destroyGame();
	static Game* getGame();

	void init( float fps, int dispW, int dispH );
	void cleanup();
	void doLoop();

	GraphicsSystem* getGraphicsSys() { return mpGraphicsSys; };
	InputSystem* getInputSys() { return mpInputSys; };
	bool getIfContinue() { return mContinue; };
	float getTargetTime() { return mTargetTime; };

	void setIfContinue( bool boo ) { mContinue = boo; };

private:
	static Game* mpsGame;

	Game();
	~Game();

	GraphicsSystem* mpGraphicsSys = nullptr;
	InputSystem* mpInputSys = nullptr;
	UnitManager* mpUnitMan = nullptr;
	GraphicsBufferManager* mpGBMan = nullptr;
	bool mContinue;
	float mTargetTime;
};