#include "InputSystem.h"

InputSystem::InputSystem()
{

}

InputSystem::~InputSystem()
{
	cleaner();
}

void InputSystem::init()
{
	if (!mIsInit)
	{
		al_install_keyboard();
		al_install_mouse();
		std::cout << "Mouse and Keyboard detected." << std::endl;
		mIsInit = true;
	}
	else
	{
		std::cout << "Mouse and/or Keyboard not detected. Please make sure they are connected and try again." << std::endl;
	}
}

void InputSystem::cleaner()
{
	if (!mIsClean)
	{
		std::cout << "Cleaned!" << std::endl;
		mIsClean = true;
	}
}

Vector2D InputSystem::getMouse(int mouseButton)
{
	ALLEGRO_MOUSE_STATE mouse;
	al_get_mouse_state(&mouse);

	if (mouse.buttons & mouseButton)
	{
		return Vector2D(mouse.x, mouse.y);
	}
	return Vector2D(-100, -100);
}

bool InputSystem::getKeyPress(int key)
{
	ALLEGRO_KEYBOARD_STATE keyPress;
	al_get_keyboard_state(&keyPress);

	if (al_key_down(&keyPress, key))
	{
		return true;
	}
	return false;
}