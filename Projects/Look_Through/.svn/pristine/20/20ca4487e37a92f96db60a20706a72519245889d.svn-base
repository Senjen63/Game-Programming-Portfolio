#include "GraphicsBuffer.h"
#include "GraphicsSystem.h"

GraphicsBuffer::GraphicsBuffer(int width, int height, Color color)
{
    mpBitmap = al_create_bitmap(width, height);
    assert(mpBitmap);

    GraphicsSystem::clearToColor(*this, color);

    mOwnedBitmap = true;
}

GraphicsBuffer::GraphicsBuffer(const std::string& pathToAsset)
{
    mpBitmap = al_load_bitmap(pathToAsset.c_str());
    assert(mpBitmap);

    mOwnedBitmap = true;
}

GraphicsBuffer::~GraphicsBuffer()
{
    if (mOwnedBitmap)
        al_destroy_bitmap(mpBitmap);
}

int GraphicsBuffer::getWidth() const
{
    return al_get_bitmap_width(mpBitmap);
}

int GraphicsBuffer::getHeight() const
{
    return al_get_bitmap_height(mpBitmap);
}

GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* pBitmap)
{
    mpBitmap = pBitmap;

    mOwnedBitmap = false;
}
