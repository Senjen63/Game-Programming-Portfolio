#pragma once
#include <PerformanceTracker.h>
#include <MemoryTracker.h>
#include <Timer.h>
#include "GraphicsSystem.h"
#include "Animation.h"
#include "InputSystem.h"
#include "Unit.h"
#include "UnitManager.h"
#include "GraphicsBufferManager.h"

const int DISP_WIDTH = 800;
const int DISP_HEIGHT = 600;
const int SPRITE_WIDTH = 60;
const int SPRITE_HEIGHT = 60;
const int SPRITE_SHEET_WIDTH = 4;
const int SPRITE_SHEET_HEIGHT = 4;
const string ASSET_PATH = "..\\..\\common\\assets\\";
const string WOODS_FILENAME = "woods.png";
const string DEAN_FILENAME = "dean_sprites.png";
const string SMURF_FILENAME = "smurf_sprites.png";

class Game : public Trackable
{
public:
	static Game* getInstance();
	static void destroyInstance();
	void init();
	void cleanup();
	void doLoop();
	GraphicsSystem* getGraphicsSystem();
	UnitManager* getUnitManager();
	GraphicsBufferManager* getGraphicsBufferManager();
	float getFrameTime();
private:
	Game();
	~Game();

	static Game* mpsGame;
	GraphicsSystem* mpGraphicsSystem;
	InputSystem* mpInputSystem;
	GraphicsBufferManager* mpBufferManager;
	UnitManager* mpUnitManager;
	float mFrameTime;
	Animation* mpSmurfAnim;
	Animation* mpDeanAnim;
};