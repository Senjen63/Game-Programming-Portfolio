#pragma once
#include <Trackable.h>
#include <Vector2D.h>
#include <EventSystem.h>

#include <allegro5/allegro.h>

#include "MessageEvent.h"
#include "InputEvent.h"

class InputSystem : public Trackable
{
    private:
        ALLEGRO_EVENT_QUEUE* mpEventQueue;

        EventSystem* mpEventSystem;

        bool mInitialized = false;
        bool mCleaned = false;

    public:
        struct
        {
            bool mSpacePressed = false;
            bool mEnterPressed = false;
        } PressedKeys;

        InputSystem();
        ~InputSystem();

        void init();
        void cleanup();

        bool getKeyState(int keyNum);
        bool getMouseState(int mouseNum);
        Vector2D getMousePosition();

        void fireInputEvents();
};