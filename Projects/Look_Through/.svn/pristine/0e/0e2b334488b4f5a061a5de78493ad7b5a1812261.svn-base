#pragma once

#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_audio.h>
#include <allegro5/allegro_acodec.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_primitives.h>

#include <PerformanceTracker.h>
#include <MemoryTracker.h>
#include <Vector2D.h>
#include <Timer.h>

#include <EventSystem.h>
#include "InputEvent.h"

using namespace std;

//KeyCode and MouseButton from Joseph Romanowski
enum class KeyCode
{
	//Letters
	A = ALLEGRO_KEY_A, B = ALLEGRO_KEY_B, C = ALLEGRO_KEY_C, D = ALLEGRO_KEY_D, E = ALLEGRO_KEY_E, F = ALLEGRO_KEY_F, 
	G = ALLEGRO_KEY_G, H = ALLEGRO_KEY_H, I = ALLEGRO_KEY_I, J = ALLEGRO_KEY_J, K = ALLEGRO_KEY_K, L = ALLEGRO_KEY_L, 
	M = ALLEGRO_KEY_M, N = ALLEGRO_KEY_N, O = ALLEGRO_KEY_O, P = ALLEGRO_KEY_P, Q = ALLEGRO_KEY_Q, R = ALLEGRO_KEY_R, 
	S = ALLEGRO_KEY_S, T = ALLEGRO_KEY_T, U = ALLEGRO_KEY_U, V = ALLEGRO_KEY_V, W = ALLEGRO_KEY_W, X = ALLEGRO_KEY_X, 
	Y = ALLEGRO_KEY_Y, Z = ALLEGRO_KEY_Z,
	//Numbers
	ONE = ALLEGRO_KEY_1, TWO = ALLEGRO_KEY_2, THREE = ALLEGRO_KEY_3, FOUR = ALLEGRO_KEY_4, FIVE = ALLEGRO_KEY_5, 
	SIX = ALLEGRO_KEY_6, SEVEN = ALLEGRO_KEY_7, EIGHT = ALLEGRO_KEY_8, NINE = ALLEGRO_KEY_9, ZERO = ALLEGRO_KEY_0,
	//Numpad
	PAD_ONE = ALLEGRO_KEY_PAD_1, PAD_TWO = ALLEGRO_KEY_PAD_2, PAD_THREE = ALLEGRO_KEY_PAD_3, PAD_FOUR = ALLEGRO_KEY_PAD_4, 
	PAD_FIVE = ALLEGRO_KEY_PAD_5, PAD_SIX = ALLEGRO_KEY_PAD_6, PAD_SEVEN = ALLEGRO_KEY_PAD_7, PAD_EIGHT = ALLEGRO_KEY_PAD_8, 
	PAD_NINE = ALLEGRO_KEY_PAD_9, PAD_ZERO = ALLEGRO_KEY_PAD_0,
	//F-keys
	F1 = ALLEGRO_KEY_F1, F2 = ALLEGRO_KEY_F2, F3 = ALLEGRO_KEY_F3, F4 = ALLEGRO_KEY_F4, F5 = ALLEGRO_KEY_F5, F6 = ALLEGRO_KEY_F6, 
	F7 = ALLEGRO_KEY_F7, F8 = ALLEGRO_KEY_F8, F9 = ALLEGRO_KEY_F9, F10 = ALLEGRO_KEY_F10, F11 = ALLEGRO_KEY_F11, F12 = ALLEGRO_KEY_F12,
	//Misc
	ESCAPE = ALLEGRO_KEY_ESCAPE,
	TAB = ALLEGRO_KEY_TAB,
	ENTER = ALLEGRO_KEY_ENTER,
	SPACE = ALLEGRO_KEY_SPACE,
	//Arrows
	LEFT = ALLEGRO_KEY_LEFT,
	RIGHT = ALLEGRO_KEY_RIGHT,
	UP = ALLEGRO_KEY_UP,
	DOWN = ALLEGRO_KEY_DOWN,
};

enum class MouseCode
{
	LEFT = 1, RIGHT = 2, MIDDLE = 3,
};

class InputSystem : public Trackable
{
private:
	ALLEGRO_KEYBOARD_STATE mKeyboardState;
	ALLEGRO_MOUSE_STATE mMouseState;
	ALLEGRO_EVENT_QUEUE* mpQueue;
	EventSystem* mpEventSystem;

public:
	InputSystem();
	~InputSystem();

	void init();
	void cleanup();

	void getKeyEvent();

	Vector2D getMousePos();
	bool getKeyState(KeyCode code);
	bool getMouseDown(MouseCode code );
};

