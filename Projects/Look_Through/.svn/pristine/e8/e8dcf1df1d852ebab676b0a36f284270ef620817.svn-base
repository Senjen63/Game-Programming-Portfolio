#include <allegro5/allegro.h>
#include "GraphicsBuffer.h"
#include "Color.h"
#include <string>

GraphicsBuffer::GraphicsBuffer(std::string filePath)
{
	mpBitmap = al_load_bitmap(filePath.c_str());
	mOwnsBitmap = true;
}

GraphicsBuffer::GraphicsBuffer(int height, int width, Color color)
{
	ALLEGRO_BITMAP* oldBackBuffer = al_get_target_bitmap();
	mOwnsBitmap = true;

	mpBitmap = al_create_bitmap(width, height);
	al_set_target_bitmap(mpBitmap);
	al_clear_to_color(color.getColor());
	//get the color back from color.
	al_set_target_bitmap(oldBackBuffer);
}

GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* bitmap)
{
	mpBitmap = bitmap;
	mOwnsBitmap = false;
}

GraphicsBuffer::~GraphicsBuffer()
{
	al_destroy_bitmap(mpBitmap);
}