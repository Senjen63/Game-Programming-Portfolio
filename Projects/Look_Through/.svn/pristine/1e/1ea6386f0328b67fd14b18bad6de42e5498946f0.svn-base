#include "Animation.h"

Animation::Animation()
{
    mAnim = nullptr;
    mShouldLoop = false;
    mTimePerFrame = 0;
    mTimeLeft = 0;
    mNumSprites = 0;
   
}

Animation::Animation(GraphicsBuffer* pBuff, int numSprites, float speed, bool loop)
{
    mAnim = Sprite::getSmurfs(pBuff, 60, 60, numSprites);

    mNumSprites = numSprites;
    mShouldLoop = loop;
    mTimePerFrame = speed;
    mTimeLeft = mTimePerFrame;

}

Animation::~Animation()
{
    delete[] mAnim;
}

void Animation::Update()
{
    if (mCurrentSprite < mNumSprites - 1)
    {
        mCurrentSprite++;
    }
    else if (mCurrentSprite == mNumSprites - 1)
    {
        if (mShouldLoop)
        {
            mCurrentSprite = 0;
        }
    }

}

void Animation::setFrameRate(float speed)
{
    mTimePerFrame = speed;
}

int Animation::getSpriteCount()
{
    return mCurrentSprite;
}

Sprite* Animation::getCurrentSprite()
{
    return &mAnim[mCurrentSprite];
}

float Animation::getFrameRate()
{
    return mTimePerFrame;
}

void Animation::changeSpeed(float x)
{
    mTimePerFrame += x;

    if (mTimePerFrame <= 0)
    {
        mTimePerFrame = .0001;
    }
}