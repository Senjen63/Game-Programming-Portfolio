#pragma once

#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_audio.h>
#include <allegro5/allegro_acodec.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_primitives.h>

#include <PerformanceTracker.h>
#include <MemoryTracker.h>
#include <iostream>
#include <Timer.h>
#include "GraphicsSystem.h"
#include "InputSystem.h"
#include "Unit.h"
#include "GraphicsBufferManager.h"
#include "UnitManager.h"


const std::string ASSET_PATH = "..\\..\\common\\assets\\";
const std::string BACKGROUND_FILENAME = "Woods.png";
const std::string DEAN_SMURFS_FILENAME = "dean_sprites.png";
const std::string SMURFS_FILENAME = "smurf_sprites.png";

const int SMURF_WIDTH = 60;
const int SMURF_HEIGHT = 60;
const int NUM_FRAMES = 16;
const float SLEEP_TIME = 16.7;
const float STARTING_TIMING = 0.0005;

const Vector2D OFFSET = Vector2D(SMURF_WIDTH / 2, SMURF_HEIGHT / 2);

const float TIME_CHANGE = 1;

class Game : public Trackable
{
public:
    Game();
    ~Game();

    static Game* getInstance();

    void init();
    void cleanUp();

    void doLoop();

    GraphicsBuffer* getGraphicsBuffer(std::string index);

private:
    static Game* mpsGame;

    GraphicsSystem* mpDisplay;
    InputSystem* mInput;
    
    GraphicsBufferManager mBufferManager;
    UnitManager mUnitManager;
};