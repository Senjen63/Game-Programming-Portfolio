#include "Animation.h"

Animation::Animation(float timePerSprite, bool shouldLoop, bool uniqueSpriteOrder)
{
	mTimePerSprite = timePerSprite;
	mTimeRemaining = timePerSprite;
	mShouldLoop = shouldLoop;
	mUniqueSpriteOrder = uniqueSpriteOrder;
}

Animation::~Animation()
{

}

void Animation::addSprite(Sprite newSprite)
{
	mSpriteList.push_back(newSprite);
}

void Animation::updateSpriteOrder(std::vector<int> newSpriteOrder)
{
	mSpriteOrder = newSpriteOrder;
}

// Updates animation when the time remaining for that frame of animation has reached 0 or less
void Animation::update(float deltaTime)
{
	mTimeRemaining -= deltaTime;

	if (mTimeRemaining <= 0)
	{
		mTimeRemaining = mTimePerSprite;
		mCurrentSprite += 1;

		if (mCurrentSprite >= mSpriteOrder.size() && mShouldLoop)
		{
			mCurrentSprite = 0;
		}

		else if (mCurrentSprite >= mSpriteOrder.size() && !mShouldLoop)
		{
			mCurrentSprite = mSpriteOrder.size() - 1;
		}
	}
}

void Animation::changeAnimationSpeed(float newTimePerSprite)
{
	mTimePerSprite = newTimePerSprite;
}