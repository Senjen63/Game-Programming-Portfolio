#include"TobbManager.h"

TobbManager::TobbManager() {}

TobbManager::~TobbManager() {}

void TobbManager::draw(GraphicsSystem* graphSys)
{
	Unit* pUnit = mpUnits[mCurrentUnit];
	pUnit->draw(graphSys);
}

void TobbManager::setTobbUnit(int index)
{
	mCurrentUnit = index;
}

void TobbManager::setTobbAnimation(int index)
{
	for (int i = 0; i < mpUnits.size(); i++)
	{
		Unit* pUnit = mpUnits[i];
		pUnit->setAnimation(index);
	}
}

void TobbManager::moveTobb(int dir)
{
	Vector2D direction = Vector2D(0, 0);

	//make the location change by vector
	if (dir == 0)
	{
		direction = Vector2D(0, -TOBB_SIZE);
	}
	else if (dir == 1)
	{
		direction = Vector2D(0, TOBB_SIZE);
	}
	else if (dir == 2)
	{
		direction = Vector2D(TOBB_SIZE, 0);
	}
	else if (dir == 3)
	{
		direction = Vector2D(-TOBB_SIZE, 0);
	}

	Vector2D newLoc = mLocation + direction;

	if (newLoc.getX() >= 640 || newLoc.getX() < 0)
	{
		return;
	}
	if (newLoc.getY() >= 640 || newLoc.getY() < 192)
	//if (newLoc.getY() >= 640 || newLoc.getY() < 0)
	{
		return;
	}

	setLocation(newLoc);
}