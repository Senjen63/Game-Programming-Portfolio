#include "GraphicsBuffer.h"

// Creates a surface from given dimensions
GraphicsBuffer::GraphicsBuffer(int width, int height)
{
	mOwnsSurface = true;
	// (flags, width, height, depth, r, g, b, a)
	mpSurface = SDL_CreateRGBSurface(0, width, height, 1, 0, 0, 0, 255);
}

// Creates a surface from a file
GraphicsBuffer::GraphicsBuffer(std::string file)
{
	mOwnsSurface = true;

	mpSurface = IMG_Load(file.c_str());

	if (mpSurface == NULL)
	{
		printf("Unable to load image %s! SDL_image Error: %s\n", file.c_str(), IMG_GetError());
	}

}

GraphicsBuffer::~GraphicsBuffer()
{
	// Deallocate the surface
	if (mOwnsSurface)
	{
		if (mpSurface)
		{
			SDL_FreeSurface(mpSurface);
			mpSurface = NULL;
		}
	}
}