#pragma once
#include "Unit.h"
#include "ArrowUnit.h"

#include <EventSystem.h>

class UnitManager;

const float RIGHT_ANGLE = 0;
const float DOWN_ANGLE = 90;
const float LEFT_ANGLE = 180;
const float UP_ANGLE = 270;


class ArrowTrapUnit : public Unit
{
    private:
        UnitManager* mpUnitManager = nullptr;

        float mFrequency = 0; //frequency of shots, what mTimeUntilFire is reset to
        float mTimeUntilFire = 0; //time in seconds until next arrow fired
        Vector2D mArrowDimensions;
        
    public:
        ArrowTrapUnit(Vector2D pos, AnimationFrames* anim, int fps, bool loopAnimation, int type, bool physicsActive, bool gravityActive, 
            bool physicsColliderActive, float frequency, Vector2D arrowDimensions);
        ~ArrowTrapUnit();

        void init();
        void cleanup();

        void update(float timeElapsed) override;
};