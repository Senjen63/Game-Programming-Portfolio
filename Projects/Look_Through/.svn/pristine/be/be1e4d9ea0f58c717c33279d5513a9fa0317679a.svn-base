
#include "GraphicsBuffer.h"
#include "Color.h"

GraphicsBuffer::GraphicsBuffer()
{
	mpBitmap = NULL;
	mOwnsBitmap = false;
}

SDL_Surface* GraphicsBuffer::GetBitmap()
{
	return mpBitmap;
}


int GraphicsBuffer::GetHeight()
{
	return mpBitmap->h;
}


int GraphicsBuffer::GetWidth()
{
	return mpBitmap->w;
}


GraphicsBuffer::GraphicsBuffer(string& file)
{
	mpBitmap = SDL_LoadBMP(file.c_str());
	if (!mpBitmap) 
	{
		cout << "Error intializing Bitmap: " << SDL_GetError() << endl;
	}
	mOwnsBitmap = true;
}

GraphicsBuffer::GraphicsBuffer(SDL_Surface* pBitmap)
{
	mpBitmap = pBitmap;
	mOwnsBitmap = false;
}

GraphicsBuffer::GraphicsBuffer(Color color, int width, int height)
{
	mpBitmap = SDL_CreateRGBSurface(0, width, height, 32, 0, 0, 0, 0);
	assert(mpBitmap);
	SDL_FillRect(mpBitmap, NULL, SDL_MapRGB(mpBitmap->format, color.GetColor().r, color.GetColor().g, color.GetColor().b));
	mOwnsBitmap = true;
}

GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwnsBitmap)
	{
		SDL_FreeSurface(mpBitmap);
	}
}