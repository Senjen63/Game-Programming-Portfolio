/*******************************************************
* Author: Aven Presseisen
* Class: GPR-250-02
* Assignment: Assignment 3
* Certification of Authenticity:
* I certify that this assignment is entirely my own work.
************/

#pragma once

#include <allegro5/allegro_image.h>
#include <allegro5/display.h>

#include "Sprite.h"
#include "Font.h"
#include "Color.h"

class GraphicsSystem : public Trackable
{
	ALLEGRO_DISPLAY * mpDisplay;
	GraphicsBuffer * mpBackBuffer;

public:
	GraphicsSystem();
	~GraphicsSystem();

	void cleanup();
	void clear( const Color & color );
	void clear( const GraphicsBuffer & targetBuffer, const Color & color );
	void createDisplay( int width, int height );
	void draw( int locX, int locY, const Sprite & sprite, float scale = 1.0f );
	void draw( const GraphicsBuffer & targetBuffer, int locX, int locY, const Sprite & sprite, float scale = 1.0f );
	void flip();
	GraphicsBuffer * getBackBuffer() const;
	int getHeight() const;
	int getWidth() const;
	void init();
	void saveBuffer( const GraphicsBuffer & graphicsBuffer, const char * pFilename );
	void writeText( int locX, int locY, const Font & font, const Color & color, const char * pText );
	void writeText( const GraphicsBuffer & targetBuffer, int locX, int locY, const Font & font, const Color & color, const char * pText );

	operator GraphicsBuffer * ( );
};
