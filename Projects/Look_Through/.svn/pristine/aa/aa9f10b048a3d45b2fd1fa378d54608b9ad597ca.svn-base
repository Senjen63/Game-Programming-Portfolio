#pragma once

#include "GraphicsSystem.h"
#include "InputSystem.h"
#include "GraphicsBufferManager.h"
#include "UnitManager.h"

const string BACKGROUND_FILENAME = "woods.png";
const string SMURF_FILENAME = "smurf_sprites.png";
const string DEAN_FILENAME = "dean_sprites.png";
//keys for buffers
const string BACKGROUND_KEY = "Background";
const string SMURF_KEY = "Smurf";
const string DEAN_KEY = "Dean";

const float SLEEP_MS = 16.7;
const float TIMER_CHANGE = .001;
const float DISTANCE = 20;

class Game : public Trackable
{
private:
	static Game* mpsInstance;

	GraphicsSystem* mpDisplay = nullptr;
	InputSystem mInputSystem;

	GraphicsBufferManager mBufferManager;
	UnitManager mUnitManager;

	bool keepGoing = true;
	bool enterPressed = false,
		spacePressed = false;

	void getInputs(Vector2D &mousePos);

	Game();
	~Game();
	void init(int width, int height);
	void cleanup();

public:
	static void createInstance(int width, int height);
	static void destroyInstance();
	static Game* getGame();

	void doLoop();

	GraphicsBufferManager* getBufferManager();
};