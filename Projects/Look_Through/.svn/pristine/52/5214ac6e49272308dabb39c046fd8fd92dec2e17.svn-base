#pragma once

#include <Trackable.h>
#include <vector>
#include "Bullet.h"
#include "BulletMove.h"
#include "MathHelp.h"

class BulletPool : public Trackable
{
public:
    BulletPool();
    ~BulletPool();

    void createBulletEntities(unsigned int numBullets, Animation* anim);

    void init();
    void cleanUp();
    void update(double deltaTime);
    void draw(GraphicsSystem* pDisplay);

    /// <summary> Can return a nullptr if pool is full </summary>
    Entity* makeBullet(Vector2D pos, float angle, float speed, PlayerNumber owningPlayer);
    void freeBullet(Entity* bullet);

private:
    Bullet* getNextAvailable();

    std::vector<Bullet> mBullets;

    unsigned int mSize;
};
