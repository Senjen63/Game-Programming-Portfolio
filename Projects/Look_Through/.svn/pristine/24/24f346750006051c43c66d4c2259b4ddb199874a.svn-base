#include "GraphicsBuffer.h"

using namespace std;

GraphicsBuffer::GraphicsBuffer(SDL_Surface* bitMap)
{
	mpBuffer = bitMap;
	mOwnsBuffer = false;
}

GraphicsBuffer::GraphicsBuffer(int width, int height)
{
	mpBuffer = SDL_CreateRGBSurface(0, width, height, 32, 0, 0, 0, 0);
	mOwnsBuffer = true;
	SDL_FillRect(mpBuffer, NULL, SDL_MapRGB(mpBuffer->format, 0, 0, 0));
	
}

GraphicsBuffer::GraphicsBuffer(const string& assetPath)
{
	mpBuffer = SDL_LoadBMP(assetPath.c_str());
	if (mpBuffer == NULL)
	{
		cout << "Error loading bitmap " << SDL_GetError() << endl;
	}
	mOwnsBuffer = true;
}

GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwnsBuffer)
	{
		SDL_FreeSurface(mpBuffer);
	}
}

SDL_Surface* GraphicsBuffer::getBuffer()
{
	return mpBuffer;
}

int GraphicsBuffer::getHeight()
{
	return mpBuffer->h;
}

int GraphicsBuffer::getWidth()
{
	return mpBuffer->w;
}
