#include "GraphicsBuffer.h"
#include <string>
#include "Color.h"

using namespace std;

GraphicsBuffer::GraphicsBuffer(int bitmapWidth, int bitmapHeight)
{
	this->mpBitmap = al_create_bitmap(bitmapWidth, bitmapHeight);
	this->mOwnership = true;
};

GraphicsBuffer::GraphicsBuffer(string fileName, bool isLocal = false)
{
	if (isLocal) 
	{
		this->mpBitmap = al_load_bitmap(("./data_files/" + fileName).c_str());
		this->mOwnership = true;
	}
	else 
	{
		this->mpBitmap = al_load_bitmap(("..\\..\\common\\assets\\" + fileName).c_str());
		this->mOwnership = true;
	}
};

GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* bitmap)
{
	this->mpBitmap = bitmap;
	this->mOwnership = false;
};

GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwnership == true)
	{
		al_destroy_bitmap(mpBitmap);
	}
};