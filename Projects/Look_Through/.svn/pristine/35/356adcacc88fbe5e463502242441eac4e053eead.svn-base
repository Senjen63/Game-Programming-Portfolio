#include "GraphicsBuffer.h"

GraphicsBuffer::GraphicsBuffer(string path)
{
	mOwnsBitmap = false;
	mpBitmap = al_load_bitmap(path.c_str());
}

GraphicsBuffer::GraphicsBuffer(Color color, int height, int width)
{
	mOwnsBitmap = false;
	mpBitmap = al_create_bitmap(width, height);
	ALLEGRO_BITMAP* prevBitmap = al_get_target_bitmap();
	al_set_target_bitmap(mpBitmap);
	al_clear_to_color(al_map_rgba(color.getR(), color.getG(), color.getB(), color.getA()));
	al_set_target_bitmap(prevBitmap);
}

GraphicsBuffer::GraphicsBuffer(ALLEGRO_BITMAP* pBitmap)
{
	mOwnsBitmap = false;
	mpBitmap = pBitmap;
}

GraphicsBuffer::~GraphicsBuffer()
{
	if (mOwnsBitmap == true)
	{
		al_destroy_bitmap(mpBitmap);
	}
}

int GraphicsBuffer::getWidth()
{
	return al_get_bitmap_width(mpBitmap);
}

int GraphicsBuffer::getHeight() 
{
	return al_get_bitmap_height(mpBitmap);
}